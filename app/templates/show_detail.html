<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ show.name }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/color-thief/2.3.0/color-thief.umd.js"></script>
    <script src="{{ url_for('static', filename='js/poster-glow.js') }}"></script>
    <script>
        document.documentElement.style.setProperty('--theme-color', '{{ show.theme_color or "rgba(255, 255, 255, 0.5)" }}');
    
        
        document.addEventListener('DOMContentLoaded', function() {
            const themeColor = '{{ show.theme_color or "#FFFFFF" }}';
            const rgb = hexToRgb(themeColor);
            document.documentElement.style.setProperty('--theme-color-rgb', `${rgb.r}, ${rgb.g}, ${rgb.b}`);
        });

        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            } : null;
        }
    </script>
  <style>
    *,
*::before,
*::after {
    box-sizing: border-box;
}
     
    
</style>
</head>
<body>
    <header class="site-header">
        <div class="header-content">
            <div class="logo">
                <img src="{{ url_for('static', filename='images/logo.svg') }}" alt="JLTV Logo">
            </div>
            <nav class="nav-links desktop-nav">
                <a href="https://jltv.tv">Home</a>
                <a href="https://jltv.tv/network">Network</a>
                <a href="https://jltv.tv/podcasts">Podcasts</a>
                <a href="https://jltv.tv/watch">Watch</a>
                <a href="https://jltv.tv/contact">Contact</a>
            </nav>
            <div class="hamburger-menu">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </header>
    <nav class="mobile-nav">
        <a href="https://jltv.tv">Home</a>
        <a href="https://jltv.tv/network">Network</a>
        <a href="https://jltv.tv/podcasts">Podcasts</a>
        <a href="https://jltv.tv/watch">Watch</a>
        <a href="https://jltv.tv/contact">Contact</a>
    </nav>
    <div class="show-detail-banner">
        <div class="show-detail-banner-bg" style="background-image: url('{{ show.banner_poster_url }}');"></div>
        <a href="{{ url_for('main.show_selection') }}" class="back-button">Back</a>
        <div class="show-detail-banner-content">
            {% if show.logo_url %}
                <img src="{{ show.logo_url }}" alt="{{ show.name }} Logo" class="show-logo">
            {% else %}
                <h1>{{ show.name }}</h1>
            {% endif %}
            <div class="show-air-time">
                {% if show.air_time %}
                    {% set formatted_time = show.air_time|format_air_time %}
                    {% set time_parts = formatted_time.split('|') %}
                    <span class="air-day">{{ time_parts[0] }}</span>
                    <span class="air-time">{{ time_parts[1] }}</span>
                {% endif %}
            </div>
        </div>
    </div>

    <div id="show-description-container" class="container">
        <p class="show-description">{{ show.description }}</p>
    </div>

    {% set has_seasons = show.seasons|length > 0 %}
    {% set show_season_selector = has_seasons and (show.seasons|length > 1 or show.seasons[0].number != 999) %}

    {% if has_seasons %}
        {% if show_season_selector %}
        <div class="season-selector-container">
            <select id="season-selector" onchange="showSeason(this.value)">
                {% for season in show.seasons|sort(attribute='number') %}
                <option value="season-{{ season.number }}">Season {{ season.number }}</option>
                {% endfor %}
            </select>
        </div>
        {% endif %}

        {% for season in show.seasons|sort(attribute='number') %}
            <div id="season-{{ season.number }}" class="show-detail-season-container" {% if show_season_selector and not loop.first %}style="display: none;"{% endif %}>
                <div class="show-detail-episode-grid">
                    {% for episode in season.episodes %}
                    <div class="show-detail-episode-card">
                        <a href="{{ url_for('main.init_episode', episode_id=episode.id, show_id=show.id) }}">
                            <img src="{{ episode.thumbnail_url }}" alt="{{ episode.name }}" class="show-detail-episode-thumbnail" crossorigin="anonymous"  data-theme-color="{{ show.theme_color }}" >
                            <div class="show-detail-episode-info">
                                <h3 class="show-detail-episode-title">{{ episode.name }}</h3>
                                <p class="show-detail-episode-description">{{ episode.short_description }}</p>
                            </div>
                        </a>
                    </div>
                    {% endfor %}
                </div>
            </div>
        {% endfor %}
    {% else %}
        <div class="no-seasons-message">
            <p>No seasons available for this show at the moment.</p>
        </div>
    {% endif %}
    <script>
    function showSeason(seasonId) {
        if (document.getElementById('season-selector')) {
            document.querySelectorAll('.show-detail-season-container').forEach(function(el) {
                el.style.display = 'none';
            });
            document.getElementById(seasonId).style.display = 'block';
        }
    }
    </script>
</body>
</html>
  <script>
      document.addEventListener('DOMContentLoaded', function() {
          const hamburger = document.querySelector('.hamburger-menu');
          const mobileNav = document.querySelector('.mobile-nav');

          hamburger.addEventListener('click', function() {
              this.classList.toggle('active');
              if (this.classList.contains('active')) {
                  mobileNav.style.display = 'block';
                  setTimeout(() => {
                      mobileNav.classList.add('active');
                  }, 10);
              } else {
                  mobileNav.classList.remove('active');
                  setTimeout(() => {
                      mobileNav.style.display = 'none';
                  }, 300);
              }
          });
      });
  </script>

  
